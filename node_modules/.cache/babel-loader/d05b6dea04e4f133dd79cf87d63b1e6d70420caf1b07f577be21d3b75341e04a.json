{"ast":null,"code":"import _objectSpread from\"C:/Users/Liyandah/Desktop/reshow/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import api from'../../utils/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminProducts=()=>{const[products,setProducts]=useState([]);const[categories,setCategories]=useState([]);const[loading,setLoading]=useState(true);const[showForm,setShowForm]=useState(false);const[editingProduct,setEditingProduct]=useState(null);const[formData,setFormData]=useState({name:'',category:'',description:'',image:''});// Ensure formData values are always strings\nconst safeFormData={name:formData.name||'',category:formData.category||(categories.length>0?categories[0].name:''),description:formData.description||'',image:formData.image||''};const[uploading,setUploading]=useState(false);const[imagePreview,setImagePreview]=useState(null);useEffect(()=>{fetchCategories();fetchProducts();},[]);const fetchCategories=async()=>{try{const res=await api.get('/categories');const cats=Array.isArray(res.data)?res.data:[];setCategories(cats);// Set default category if formData is empty\nif(cats.length>0&&!formData.category){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{category:cats[0].name}));}}catch(error){console.error('Error fetching categories:',error);// Fallback to default categories if API fails\nsetCategories([{id:'cat_1',name:'Apparel'},{id:'cat_2',name:'Headwear'},{id:'cat_3',name:'Promotional Gifts'},{id:'cat_4',name:'PPE Wear'}]);}};const fetchProducts=async()=>{try{const res=await api.get('/products');setProducts(Array.isArray(res.data)?res.data:[]);setLoading(false);}catch(error){var _error$response;console.error('Error fetching products:',error);if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===400){console.error('Bad request - check if products.json exists and is valid');}setProducts([]);setLoading(false);}};const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleImageUpload=async e=>{const file=e.target.files[0];if(!file)return;// Show immediate preview\nconst reader=new FileReader();reader.onloadend=()=>{setImagePreview(reader.result);};reader.readAsDataURL(file);setUploading(true);const uploadFormData=new FormData();uploadFormData.append('image',file);uploadFormData.append('uploadType','products');try{const res=await api.post('/admin/upload',uploadFormData,{headers:{'Content-Type':'multipart/form-data'}});// Get the full URL - check if it's already a full URL or needs the base URL\nlet imageUrl=res.data.url||'';if(imageUrl&&!imageUrl.startsWith('http')){// If it's a relative path, make it absolute using the API base URL\nconst apiBaseUrl=api.defaults.baseURL||'http://localhost:3000/api';const serverBaseUrl=apiBaseUrl.replace('/api','');imageUrl=\"\".concat(serverBaseUrl).concat(imageUrl);}setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{image:imageUrl}));// Keep preview showing the uploaded image\nsetImagePreview(imageUrl);}catch(error){var _error$response2,_error$response2$data;console.error('Image upload error:',error);alert(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Image upload failed');setImagePreview(null);}finally{setUploading(false);}};const handleSubmit=async e=>{e.preventDefault();try{// Use safeFormData to ensure all values are strings\nconst dataToSubmit={name:safeFormData.name.trim(),category:safeFormData.category,description:safeFormData.description.trim(),image:safeFormData.image||''};if(editingProduct){await api.put(\"/products/\".concat(editingProduct.id),dataToSubmit);}else{await api.post('/products',dataToSubmit);}fetchProducts();resetForm();}catch(error){var _error$response3,_error$response3$data;console.error('Error saving product:',error);alert(((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.error)||'Failed to save product');}};const handleEdit=product=>{setEditingProduct(product);const imageUrl=product.image||'';setFormData({name:product.name||'',category:product.category||(categories.length>0?categories[0].name:''),description:product.description||'',image:imageUrl});// Set preview for editing\nsetImagePreview(imageUrl);setShowForm(true);};const handleDelete=async id=>{if(!window.confirm('Are you sure you want to delete this product?'))return;try{await api.delete(\"/products/\".concat(id));fetchProducts();}catch(error){alert('Failed to delete product');}};const resetForm=()=>{setFormData({name:'',category:categories.length>0?categories[0].name:'',description:'',image:''});setImagePreview(null);setEditingProduct(null);setShowForm(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold font-dinbek text-reshow-dark\",children:\"Products\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowForm(!showForm),className:\"bg-reshow-red text-white px-4 py-2 rounded-lg font-dosis font-semibold hover:bg-reshow-dark-red transition-colors\",children:showForm?'Cancel':'Add Product'})]}),showForm&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"bg-gray-50 p-6 rounded-lg mb-6 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-dosis font-semibold mb-2\",children:\"Product Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:safeFormData.name,onChange:handleChange,required:true,className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-reshow-red font-dosis\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-dosis font-semibold mb-2\",children:\"Category *\"}),/*#__PURE__*/_jsx(\"select\",{name:\"category\",value:safeFormData.category,onChange:handleChange,required:true,className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-reshow-red font-dosis\",children:categories.length>0?categories.map(cat=>/*#__PURE__*/_jsx(\"option\",{value:cat.name,children:cat.name},cat.id)):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"option\",{value:\"Apparel\",children:\"Apparel\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Headwear\",children:\"Headwear\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Promotional Gifts\",children:\"Promotional Gifts\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PPE Wear\",children:\"PPE Wear\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-dosis font-semibold mb-2\",children:\"Description *\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:safeFormData.description,onChange:handleChange,required:true,rows:\"4\",className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-reshow-red font-dosis\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-dosis font-semibold mb-2\",children:\"Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleImageUpload,className:\"w-full px-4 py-2 border border-gray-300 rounded-lg font-dosis\"}),uploading&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-dosis text-gray-600 mt-2\",children:\"Uploading...\"}),(imagePreview||safeFormData.image)&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"img\",{src:imagePreview||safeFormData.image,alt:\"Preview\",className:\"w-48 h-48 object-cover rounded border border-gray-300\",onError:e=>{console.error('Image load error:',e.target.src);e.target.src='/images/placeholder.jpg';}}),safeFormData.image&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs font-dosis text-gray-500 mt-1\",children:[\"Image URL: \",safeFormData.image]})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"bg-reshow-red text-white px-6 py-2 rounded-lg font-dosis font-semibold hover:bg-reshow-dark-red transition-colors\",children:editingProduct?'Update Product':'Add Product'})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12 font-dosis\",children:\"Loading products...\"}):products.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12 font-dosis text-gray-600\",children:\"No products yet. Add your first product!\"}):/*#__PURE__*/_jsx(\"div\",{className:\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\",children:products.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:\"border rounded-lg p-4 flex flex-col\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"relative w-full aspect-[4/3] bg-gray-100 rounded mb-4 overflow-hidden flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"img\",{src:product.image||'/images/placeholder.jpg',alt:product.name,className:\"max-w-full max-h-full w-auto h-auto object-contain\",onError:e=>{e.target.src='/images/placeholder.jpg';}})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold font-dinbek mb-2\",children:product.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-dosis text-gray-600 mb-2\",children:product.category}),/*#__PURE__*/_jsx(\"p\",{className:\"font-dosis text-gray-700 text-sm mb-4 line-clamp-2\",children:product.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(product),className:\"flex-1 bg-reshow-dark text-white py-2 rounded-lg font-dosis font-semibold hover:bg-gray-800 transition-colors\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(product.id),className:\"flex-1 bg-red-500 text-white py-2 rounded-lg font-dosis font-semibold hover:bg-red-600 transition-colors\",children:\"Delete\"})]})]},product.id))})]});};export default AdminProducts;","map":{"version":3,"names":["React","useState","useEffect","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminProducts","products","setProducts","categories","setCategories","loading","setLoading","showForm","setShowForm","editingProduct","setEditingProduct","formData","setFormData","name","category","description","image","safeFormData","length","uploading","setUploading","imagePreview","setImagePreview","fetchCategories","fetchProducts","res","get","cats","Array","isArray","data","prev","_objectSpread","error","console","id","_error$response","response","status","handleChange","e","target","value","handleImageUpload","file","files","reader","FileReader","onloadend","result","readAsDataURL","uploadFormData","FormData","append","post","headers","imageUrl","url","startsWith","apiBaseUrl","defaults","baseURL","serverBaseUrl","replace","concat","_error$response2","_error$response2$data","alert","handleSubmit","preventDefault","dataToSubmit","trim","put","resetForm","_error$response3","_error$response3$data","handleEdit","product","handleDelete","window","confirm","delete","children","className","onClick","onSubmit","type","onChange","required","map","cat","rows","accept","src","alt","onError"],"sources":["C:/Users/Liyandah/Desktop/reshow/client/src/pages/admin/AdminProducts.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport api from '../../utils/api';\n\nconst AdminProducts = () => {\n  const [products, setProducts] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showForm, setShowForm] = useState(false);\n  const [editingProduct, setEditingProduct] = useState(null);\n  const [formData, setFormData] = useState({\n    name: '',\n    category: '',\n    description: '',\n    image: ''\n  });\n\n  // Ensure formData values are always strings\n  const safeFormData = {\n    name: formData.name || '',\n    category: formData.category || (categories.length > 0 ? categories[0].name : ''),\n    description: formData.description || '',\n    image: formData.image || ''\n  };\n  const [uploading, setUploading] = useState(false);\n  const [imagePreview, setImagePreview] = useState(null);\n\n  useEffect(() => {\n    fetchCategories();\n    fetchProducts();\n  }, []);\n\n  const fetchCategories = async () => {\n    try {\n      const res = await api.get('/categories');\n      const cats = Array.isArray(res.data) ? res.data : [];\n      setCategories(cats);\n      // Set default category if formData is empty\n      if (cats.length > 0 && !formData.category) {\n        setFormData(prev => ({ ...prev, category: cats[0].name }));\n      }\n    } catch (error) {\n      console.error('Error fetching categories:', error);\n      // Fallback to default categories if API fails\n      setCategories([\n        { id: 'cat_1', name: 'Apparel' },\n        { id: 'cat_2', name: 'Headwear' },\n        { id: 'cat_3', name: 'Promotional Gifts' },\n        { id: 'cat_4', name: 'PPE Wear' }\n      ]);\n    }\n  };\n\n  const fetchProducts = async () => {\n    try {\n      const res = await api.get('/products');\n      setProducts(Array.isArray(res.data) ? res.data : []);\n      setLoading(false);\n    } catch (error) {\n      console.error('Error fetching products:', error);\n      if (error.response?.status === 400) {\n        console.error('Bad request - check if products.json exists and is valid');\n      }\n      setProducts([]);\n      setLoading(false);\n    }\n  };\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleImageUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    // Show immediate preview\n    const reader = new FileReader();\n    reader.onloadend = () => {\n      setImagePreview(reader.result);\n    };\n    reader.readAsDataURL(file);\n\n    setUploading(true);\n    const uploadFormData = new FormData();\n    uploadFormData.append('image', file);\n    uploadFormData.append('uploadType', 'products');\n\n    try {\n      const res = await api.post('/admin/upload', uploadFormData, {\n        headers: { 'Content-Type': 'multipart/form-data' }\n      });\n      \n      // Get the full URL - check if it's already a full URL or needs the base URL\n      let imageUrl = res.data.url || '';\n      if (imageUrl && !imageUrl.startsWith('http')) {\n        // If it's a relative path, make it absolute using the API base URL\n        const apiBaseUrl = api.defaults.baseURL || 'http://localhost:3000/api';\n        const serverBaseUrl = apiBaseUrl.replace('/api', '');\n        imageUrl = `${serverBaseUrl}${imageUrl}`;\n      }\n      \n      setFormData(prev => ({ ...prev, image: imageUrl }));\n      // Keep preview showing the uploaded image\n      setImagePreview(imageUrl);\n    } catch (error) {\n      console.error('Image upload error:', error);\n      alert(error.response?.data?.error || 'Image upload failed');\n      setImagePreview(null);\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      // Use safeFormData to ensure all values are strings\n      const dataToSubmit = {\n        name: safeFormData.name.trim(),\n        category: safeFormData.category,\n        description: safeFormData.description.trim(),\n        image: safeFormData.image || ''\n      };\n      \n      if (editingProduct) {\n        await api.put(`/products/${editingProduct.id}`, dataToSubmit);\n      } else {\n        await api.post('/products', dataToSubmit);\n      }\n      fetchProducts();\n      resetForm();\n    } catch (error) {\n      console.error('Error saving product:', error);\n      alert(error.response?.data?.error || 'Failed to save product');\n    }\n  };\n\n  const handleEdit = (product) => {\n    setEditingProduct(product);\n    const imageUrl = product.image || '';\n    setFormData({\n      name: product.name || '',\n      category: product.category || (categories.length > 0 ? categories[0].name : ''),\n      description: product.description || '',\n      image: imageUrl\n    });\n    // Set preview for editing\n    setImagePreview(imageUrl);\n    setShowForm(true);\n  };\n\n  const handleDelete = async (id) => {\n    if (!window.confirm('Are you sure you want to delete this product?')) return;\n\n    try {\n      await api.delete(`/products/${id}`);\n      fetchProducts();\n    } catch (error) {\n      alert('Failed to delete product');\n    }\n  };\n\n  const resetForm = () => {\n    setFormData({ \n      name: '', \n      category: categories.length > 0 ? categories[0].name : '', \n      description: '', \n      image: '' \n    });\n    setImagePreview(null);\n    setEditingProduct(null);\n    setShowForm(false);\n  };\n\n  return (\n    <div>\n      <div className=\"flex justify-between items-center mb-6\">\n        <h2 className=\"text-2xl font-bold font-dinbek text-reshow-dark\">Products</h2>\n        <button\n          onClick={() => setShowForm(!showForm)}\n          className=\"bg-reshow-red text-white px-4 py-2 rounded-lg font-dosis font-semibold hover:bg-reshow-dark-red transition-colors\"\n        >\n          {showForm ? 'Cancel' : 'Add Product'}\n        </button>\n      </div>\n\n      {showForm && (\n        <form onSubmit={handleSubmit} className=\"bg-gray-50 p-6 rounded-lg mb-6 space-y-4\">\n          <div>\n            <label className=\"block font-dosis font-semibold mb-2\">Product Name *</label>\n            <input\n              type=\"text\"\n              name=\"name\"\n              value={safeFormData.name}\n              onChange={handleChange}\n              required\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-reshow-red font-dosis\"\n            />\n          </div>\n          <div>\n            <label className=\"block font-dosis font-semibold mb-2\">Category *</label>\n            <select\n              name=\"category\"\n              value={safeFormData.category}\n              onChange={handleChange}\n              required\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-reshow-red font-dosis\"\n            >\n              {categories.length > 0 ? (\n                categories.map(cat => (\n                  <option key={cat.id} value={cat.name}>{cat.name}</option>\n                ))\n              ) : (\n                <>\n                  <option value=\"Apparel\">Apparel</option>\n                  <option value=\"Headwear\">Headwear</option>\n                  <option value=\"Promotional Gifts\">Promotional Gifts</option>\n                  <option value=\"PPE Wear\">PPE Wear</option>\n                </>\n              )}\n            </select>\n          </div>\n          <div>\n            <label className=\"block font-dosis font-semibold mb-2\">Description *</label>\n            <textarea\n              name=\"description\"\n              value={safeFormData.description}\n              onChange={handleChange}\n              required\n              rows=\"4\"\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-reshow-red font-dosis\"\n            ></textarea>\n          </div>\n          <div>\n            <label className=\"block font-dosis font-semibold mb-2\">Image</label>\n            <input\n              type=\"file\"\n              accept=\"image/*\"\n              onChange={handleImageUpload}\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg font-dosis\"\n            />\n            {uploading && <p className=\"text-sm font-dosis text-gray-600 mt-2\">Uploading...</p>}\n            {(imagePreview || safeFormData.image) && (\n              <div className=\"mt-2\">\n                <img \n                  src={imagePreview || safeFormData.image} \n                  alt=\"Preview\" \n                  className=\"w-48 h-48 object-cover rounded border border-gray-300\"\n                  onError={(e) => {\n                    console.error('Image load error:', e.target.src);\n                    e.target.src = '/images/placeholder.jpg';\n                  }}\n                />\n                {safeFormData.image && (\n                  <p className=\"text-xs font-dosis text-gray-500 mt-1\">Image URL: {safeFormData.image}</p>\n                )}\n              </div>\n            )}\n          </div>\n          <button\n            type=\"submit\"\n            className=\"bg-reshow-red text-white px-6 py-2 rounded-lg font-dosis font-semibold hover:bg-reshow-dark-red transition-colors\"\n          >\n            {editingProduct ? 'Update Product' : 'Add Product'}\n          </button>\n        </form>\n      )}\n\n      {loading ? (\n        <div className=\"text-center py-12 font-dosis\">Loading products...</div>\n      ) : products.length === 0 ? (\n        <div className=\"text-center py-12 font-dosis text-gray-600\">No products yet. Add your first product!</div>\n      ) : (\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          {products.map(product => (\n            <div key={product.id} className=\"border rounded-lg p-4 flex flex-col\">\n              <div className=\"relative w-full aspect-[4/3] bg-gray-100 rounded mb-4 overflow-hidden flex items-center justify-center\">\n                <img\n                  src={product.image || '/images/placeholder.jpg'}\n                  alt={product.name}\n                  className=\"max-w-full max-h-full w-auto h-auto object-contain\"\n                  onError={(e) => {\n                    e.target.src = '/images/placeholder.jpg';\n                  }}\n                />\n              </div>\n              <h3 className=\"text-lg font-bold font-dinbek mb-2\">{product.name}</h3>\n              <p className=\"text-sm font-dosis text-gray-600 mb-2\">{product.category}</p>\n              <p className=\"font-dosis text-gray-700 text-sm mb-4 line-clamp-2\">{product.description}</p>\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={() => handleEdit(product)}\n                  className=\"flex-1 bg-reshow-dark text-white py-2 rounded-lg font-dosis font-semibold hover:bg-gray-800 transition-colors\"\n                >\n                  Edit\n                </button>\n                <button\n                  onClick={() => handleDelete(product.id)}\n                  className=\"flex-1 bg-red-500 text-white py-2 rounded-lg font-dosis font-semibold hover:bg-red-600 transition-colors\"\n                >\n                  Delete\n                </button>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AdminProducts;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}