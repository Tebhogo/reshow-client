{"ast":null,"code":"import React,{useState,useEffect}from'react';import api from'../../utils/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminCategories=()=>{const[categories,setCategories]=useState([]);const[loading,setLoading]=useState(true);const[showForm,setShowForm]=useState(false);const[categoryName,setCategoryName]=useState('');const[saving,setSaving]=useState(false);useEffect(()=>{fetchCategories();},[]);const fetchCategories=async()=>{setLoading(true);try{const res=await api.get('/categories');setCategories(Array.isArray(res.data)?res.data:[]);}catch(error){console.error('Error fetching categories:',error);setCategories([]);}finally{setLoading(false);}};const handleSubmit=async e=>{e.preventDefault();if(!categoryName.trim()){alert('Category name is required');return;}setSaving(true);try{await api.post('/categories',{name:categoryName.trim()});setCategoryName('');setShowForm(false);fetchCategories();}catch(error){var _error$response,_error$response$data;console.error('Error creating category:',error);alert(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.error)||'Failed to create category');}finally{setSaving(false);}};const handleDelete=async(id,name)=>{if(!window.confirm(\"Are you sure you want to delete the category \\\"\".concat(name,\"\\\"?\\n\\nNote: You cannot delete a category if products are using it.\"))){return;}try{await api.delete(\"/categories/\".concat(id));fetchCategories();}catch(error){var _error$response2,_error$response2$data;console.error('Error deleting category:',error);alert(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.error)||'Failed to delete category');}};const resetForm=()=>{setCategoryName('');setShowForm(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold font-dinbek text-reshow-dark\",children:\"Product Categories\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(showForm){resetForm();}else{setShowForm(true);}},className:\"bg-reshow-red text-white px-4 py-2 rounded-lg font-dosis font-semibold hover:bg-reshow-dark-red transition-colors\",children:showForm?'Cancel':'+ Add Category'})]}),showForm&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"bg-gray-50 p-6 rounded-lg mb-6 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-dosis font-semibold mb-2\",children:\"Category Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:categoryName,onChange:e=>setCategoryName(e.target.value),required:true,placeholder:\"e.g., Accessories, Footwear, etc.\",className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-reshow-red font-dosis\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:saving,className:\"bg-reshow-red text-white px-6 py-2 rounded-lg font-dosis font-semibold hover:bg-reshow-dark-red transition-colors disabled:opacity-50\",children:saving?'Adding...':'Add Category'})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12 font-dosis\",children:\"Loading categories...\"}):categories.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-12 font-dosis text-gray-600 bg-white p-6 rounded-lg border border-gray-200\",children:\"No categories yet. Click \\\"Add Category\\\" to create your first category!\"}):/*#__PURE__*/_jsx(\"div\",{className:\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\",children:categories.map(category=>/*#__PURE__*/_jsx(\"div\",{className:\"border rounded-lg p-4 bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold font-dinbek text-reshow-dark\",children:category.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm font-dosis text-gray-500 mt-1\",children:[\"Created: \",new Date(category.createdAt).toLocaleDateString()]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(category.id,category.name),className:\"bg-red-500 text-white px-4 py-2 rounded-lg font-dosis font-semibold hover:bg-red-600 transition-colors text-sm\",children:\"Delete\"})]})},category.id))}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"font-dosis text-sm text-gray-700\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Note:\"}),\" You cannot delete a category if there are products assigned to it. Please reassign or delete those products first.\"]})})]});};export default AdminCategories;","map":{"version":3,"names":["React","useState","useEffect","api","jsx","_jsx","jsxs","_jsxs","AdminCategories","categories","setCategories","loading","setLoading","showForm","setShowForm","categoryName","setCategoryName","saving","setSaving","fetchCategories","res","get","Array","isArray","data","error","console","handleSubmit","e","preventDefault","trim","alert","post","name","_error$response","_error$response$data","response","handleDelete","id","window","confirm","concat","delete","_error$response2","_error$response2$data","resetForm","children","className","onClick","onSubmit","type","value","onChange","target","required","placeholder","disabled","length","map","category","Date","createdAt","toLocaleDateString"],"sources":["C:/Users/Liyandah/Desktop/reshow/client/src/pages/admin/AdminCategories.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api from '../../utils/api';\r\n\r\nconst AdminCategories = () => {\r\n  const [categories, setCategories] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [categoryName, setCategoryName] = useState('');\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  useEffect(() => {\r\n    fetchCategories();\r\n  }, []);\r\n\r\n  const fetchCategories = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const res = await api.get('/categories');\r\n      setCategories(Array.isArray(res.data) ? res.data : []);\r\n    } catch (error) {\r\n      console.error('Error fetching categories:', error);\r\n      setCategories([]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!categoryName.trim()) {\r\n      alert('Category name is required');\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n    try {\r\n      await api.post('/categories', { name: categoryName.trim() });\r\n      setCategoryName('');\r\n      setShowForm(false);\r\n      fetchCategories();\r\n    } catch (error) {\r\n      console.error('Error creating category:', error);\r\n      alert(error.response?.data?.error || 'Failed to create category');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id, name) => {\r\n    if (!window.confirm(`Are you sure you want to delete the category \"${name}\"?\\n\\nNote: You cannot delete a category if products are using it.`)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await api.delete(`/categories/${id}`);\r\n      fetchCategories();\r\n    } catch (error) {\r\n      console.error('Error deleting category:', error);\r\n      alert(error.response?.data?.error || 'Failed to delete category');\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setCategoryName('');\r\n    setShowForm(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <h2 className=\"text-2xl font-bold font-dinbek text-reshow-dark\">Product Categories</h2>\r\n        <button\r\n          onClick={() => {\r\n            if (showForm) {\r\n              resetForm();\r\n            } else {\r\n              setShowForm(true);\r\n            }\r\n          }}\r\n          className=\"bg-reshow-red text-white px-4 py-2 rounded-lg font-dosis font-semibold hover:bg-reshow-dark-red transition-colors\"\r\n        >\r\n          {showForm ? 'Cancel' : '+ Add Category'}\r\n        </button>\r\n      </div>\r\n\r\n      {showForm && (\r\n        <form onSubmit={handleSubmit} className=\"bg-gray-50 p-6 rounded-lg mb-6 space-y-4\">\r\n          <div>\r\n            <label className=\"block font-dosis font-semibold mb-2\">Category Name *</label>\r\n            <input\r\n              type=\"text\"\r\n              value={categoryName}\r\n              onChange={(e) => setCategoryName(e.target.value)}\r\n              required\r\n              placeholder=\"e.g., Accessories, Footwear, etc.\"\r\n              className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-reshow-red font-dosis\"\r\n            />\r\n          </div>\r\n          <button\r\n            type=\"submit\"\r\n            disabled={saving}\r\n            className=\"bg-reshow-red text-white px-6 py-2 rounded-lg font-dosis font-semibold hover:bg-reshow-dark-red transition-colors disabled:opacity-50\"\r\n          >\r\n            {saving ? 'Adding...' : 'Add Category'}\r\n          </button>\r\n        </form>\r\n      )}\r\n\r\n      {loading ? (\r\n        <div className=\"text-center py-12 font-dosis\">Loading categories...</div>\r\n      ) : categories.length === 0 ? (\r\n        <div className=\"text-center py-12 font-dosis text-gray-600 bg-white p-6 rounded-lg border border-gray-200\">\r\n          No categories yet. Click \"Add Category\" to create your first category!\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {categories.map(category => (\r\n            <div key={category.id} className=\"border rounded-lg p-4 bg-white\">\r\n              <div className=\"flex justify-between items-center\">\r\n                <div>\r\n                  <h3 className=\"text-lg font-bold font-dinbek text-reshow-dark\">{category.name}</h3>\r\n                  <p className=\"text-sm font-dosis text-gray-500 mt-1\">\r\n                    Created: {new Date(category.createdAt).toLocaleDateString()}\r\n                  </p>\r\n                </div>\r\n                <button\r\n                  onClick={() => handleDelete(category.id, category.name)}\r\n                  className=\"bg-red-500 text-white px-4 py-2 rounded-lg font-dosis font-semibold hover:bg-red-600 transition-colors text-sm\"\r\n                >\r\n                  Delete\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg\">\r\n        <p className=\"font-dosis text-sm text-gray-700\">\r\n          <strong>Note:</strong> You cannot delete a category if there are products assigned to it. \r\n          Please reassign or delete those products first.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminCategories;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}