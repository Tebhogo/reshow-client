{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Link}from\"react-router-dom\";import api from\"../utils/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const HeroWelcome=()=>{const text=\"Trusted Zimbabwean company specialising in corporate branding, promotional gifts, corporate apparel, and branding solutions.\";const[displayText,setDisplayText]=useState(\"\");const[index,setIndex]=useState(0);const[heroContent,setHeroContent]=useState(null);const[heroImage,setHeroImage]=useState(\"/images/placeholder/hero-image.jpg\");const[imageError,setImageError]=useState(false);useEffect(()=>{let isMounted=true;// Fetch hero content from API\nconst fetchHeroContent=async()=>{try{const res=await api.get('/content/hero');console.log('Hero content fetched:',res.data);// Only update state if component is still mounted\nif(!isMounted)return;if(res.data){setHeroContent(res.data);// Handle image URL\nif(res.data.image){let imageUrl=res.data.image;console.log('Original image path:',imageUrl);// If it's a relative path starting with /uploads, make it absolute\nif(imageUrl.startsWith('/uploads')){// Get the API base URL and construct server URL\nconst apiBaseUrl=api.defaults.baseURL||'http://localhost:3000/api';let serverBaseUrl=apiBaseUrl.replace('/api','');// If server might be on different port, try to detect\n// Check if we're using port 3000 but server might be on 5000\nif(serverBaseUrl.includes(':3000')){// Try port 3000 first\nimageUrl=\"\".concat(serverBaseUrl).concat(imageUrl);}else{// Use whatever port the API is on\nimageUrl=\"\".concat(serverBaseUrl).concat(imageUrl);}console.log('API Base URL:',apiBaseUrl);console.log('Server Base URL:',serverBaseUrl);console.log('Constructed image URL:',imageUrl);}else if(!imageUrl.startsWith('http')&&!imageUrl.startsWith('/images')){// If it's a relative path but not /uploads or /images, also make it absolute\nconst apiBaseUrl=api.defaults.baseURL||'http://localhost:3000/api';const serverBaseUrl=apiBaseUrl.replace('/api','');imageUrl=\"\".concat(serverBaseUrl).concat(imageUrl);console.log('Constructed image URL:',imageUrl);}setHeroImage(imageUrl);setImageError(false);// Reset error state when new image is set\n}else{console.log('No image in hero content');}}}catch(error){var _error$response;console.error('Error fetching hero content:',error);console.error('Error details:',((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);// Use default image if fetch fails - don't retry to prevent loops\n}};fetchHeroContent();// Cleanup function to prevent state updates after unmount\nreturn()=>{isMounted=false;};},[]);useEffect(()=>{if(index<text.length){const timeout=setTimeout(()=>{setDisplayText(prev=>prev+text[index]);setIndex(index+1);},50);return()=>clearTimeout(timeout);}},[index,text]);// Get the background image URL\nconst backgroundImageUrl=imageError?'/images/placeholder/hero-image.jpg':heroImage;return/*#__PURE__*/_jsxs(\"section\",{className:\"relative pt-20 pb-40 min-h-[600px] md:min-h-[700px] flex items-center justify-center\",style:{backgroundImage:\"url(\".concat(backgroundImageUrl,\")\"),backgroundSize:'cover',backgroundPosition:'center',backgroundRepeat:'no-repeat',backgroundAttachment:'fixed'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black bg-opacity-40\"}),/*#__PURE__*/_jsx(\"img\",{src:backgroundImageUrl,alt:\"Reshow Branding\",className:\"hidden\",onError:e=>{// Only handle error once to prevent infinite loops\nif(!imageError){console.error('Image failed to load:',heroImage);console.error('Using fallback image');setImageError(true);// Set fallback image\ne.target.src='/images/placeholder/hero-image.jpg';}},onLoad:()=>{if(!imageError){console.log('Image loaded successfully:',heroImage);}}}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative z-10 max-w-7xl mx-auto px-6 text-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl md:text-6xl font-bold font-dinbek text-white mb-6 drop-shadow-lg\",children:(heroContent===null||heroContent===void 0?void 0:heroContent.title)||'Reshow Investments (Pvt) Ltd'}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl md:text-3xl font-dosis text-white mb-8 drop-shadow-lg\",children:(heroContent===null||heroContent===void 0?void 0:heroContent.subtitle)||'Name it we brand it.'}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg md:text-2xl font-dosis text-white max-w-4xl mx-auto mb-10 min-h-[4rem] drop-shadow-lg\",children:[(heroContent===null||heroContent===void 0?void 0:heroContent.description)||displayText,!(heroContent!==null&&heroContent!==void 0&&heroContent.description)&&index<text.length&&/*#__PURE__*/_jsx(\"span\",{className:\"animate-pulse text-reshow-red\",children:\"|\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-4 justify-center\",children:[/*#__PURE__*/_jsx(Link,{to:\"/services\",className:\"bg-reshow-red text-white px-8 py-3 rounded-lg font-dosis font-semibold hover:bg-reshow-dark-red transition-colors shadow-lg\",children:(heroContent===null||heroContent===void 0?void 0:heroContent.buttonText)||'Request Quote'}),/*#__PURE__*/_jsx(Link,{to:\"/contact\",className:\"bg-white border-2 border-white text-reshow-red px-8 py-3 rounded-lg font-dosis font-semibold hover:bg-reshow-red hover:text-white hover:border-reshow-red transition-colors shadow-lg\",children:\"Contact Us\"})]})]})]});};export default HeroWelcome;","map":{"version":3,"names":["React","useEffect","useState","Link","api","jsx","_jsx","jsxs","_jsxs","HeroWelcome","text","displayText","setDisplayText","index","setIndex","heroContent","setHeroContent","heroImage","setHeroImage","imageError","setImageError","isMounted","fetchHeroContent","res","get","console","log","data","image","imageUrl","startsWith","apiBaseUrl","defaults","baseURL","serverBaseUrl","replace","includes","concat","error","_error$response","response","message","length","timeout","setTimeout","prev","clearTimeout","backgroundImageUrl","className","style","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","backgroundAttachment","children","src","alt","onError","e","target","onLoad","title","subtitle","description","to","buttonText"],"sources":["C:/Users/Liyandah/Desktop/reshow/client/src/components/HeroWelcome.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport api from \"../utils/api\";\n\nconst HeroWelcome = () => {\n  const text = \"Trusted Zimbabwean company specialising in corporate branding, promotional gifts, corporate apparel, and branding solutions.\";\n  const [displayText, setDisplayText] = useState(\"\");\n  const [index, setIndex] = useState(0);\n  const [heroContent, setHeroContent] = useState(null);\n  const [heroImage, setHeroImage] = useState(\"/images/placeholder/hero-image.jpg\");\n  const [imageError, setImageError] = useState(false);\n\n  useEffect(() => {\n    let isMounted = true;\n    \n    // Fetch hero content from API\n    const fetchHeroContent = async () => {\n      try {\n        const res = await api.get('/content/hero');\n        console.log('Hero content fetched:', res.data);\n        \n        // Only update state if component is still mounted\n        if (!isMounted) return;\n        \n        if (res.data) {\n          setHeroContent(res.data);\n          \n          // Handle image URL\n          if (res.data.image) {\n            let imageUrl = res.data.image;\n            console.log('Original image path:', imageUrl);\n            \n            // If it's a relative path starting with /uploads, make it absolute\n            if (imageUrl.startsWith('/uploads')) {\n              // Get the API base URL and construct server URL\n              const apiBaseUrl = api.defaults.baseURL || 'http://localhost:3000/api';\n              let serverBaseUrl = apiBaseUrl.replace('/api', '');\n              \n              // If server might be on different port, try to detect\n              // Check if we're using port 3000 but server might be on 5000\n              if (serverBaseUrl.includes(':3000')) {\n                // Try port 3000 first\n                imageUrl = `${serverBaseUrl}${imageUrl}`;\n              } else {\n                // Use whatever port the API is on\n                imageUrl = `${serverBaseUrl}${imageUrl}`;\n              }\n              \n              console.log('API Base URL:', apiBaseUrl);\n              console.log('Server Base URL:', serverBaseUrl);\n              console.log('Constructed image URL:', imageUrl);\n            } else if (!imageUrl.startsWith('http') && !imageUrl.startsWith('/images')) {\n              // If it's a relative path but not /uploads or /images, also make it absolute\n              const apiBaseUrl = api.defaults.baseURL || 'http://localhost:3000/api';\n              const serverBaseUrl = apiBaseUrl.replace('/api', '');\n              imageUrl = `${serverBaseUrl}${imageUrl}`;\n              console.log('Constructed image URL:', imageUrl);\n            }\n            setHeroImage(imageUrl);\n            setImageError(false); // Reset error state when new image is set\n          } else {\n            console.log('No image in hero content');\n          }\n        }\n      } catch (error) {\n        console.error('Error fetching hero content:', error);\n        console.error('Error details:', error.response?.data || error.message);\n        // Use default image if fetch fails - don't retry to prevent loops\n      }\n    };\n    \n    fetchHeroContent();\n    \n    // Cleanup function to prevent state updates after unmount\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    if (index < text.length) {\n      const timeout = setTimeout(() => {\n        setDisplayText((prev) => prev + text[index]);\n        setIndex(index + 1);\n      }, 50);\n      return () => clearTimeout(timeout);\n    }\n  }, [index, text]);\n\n  // Get the background image URL\n  const backgroundImageUrl = imageError ? '/images/placeholder/hero-image.jpg' : heroImage;\n\n  return (\n    <section \n      className=\"relative pt-20 pb-40 min-h-[600px] md:min-h-[700px] flex items-center justify-center\"\n      style={{\n        backgroundImage: `url(${backgroundImageUrl})`,\n        backgroundSize: 'cover',\n        backgroundPosition: 'center',\n        backgroundRepeat: 'no-repeat',\n        backgroundAttachment: 'fixed'\n      }}\n    >\n      {/* Dark overlay for better text readability */}\n      <div className=\"absolute inset-0 bg-black bg-opacity-40\"></div>\n\n      {/* Hidden image for error handling */}\n      <img\n        src={backgroundImageUrl}\n        alt=\"Reshow Branding\"\n        className=\"hidden\"\n        onError={(e) => {\n          // Only handle error once to prevent infinite loops\n          if (!imageError) {\n            console.error('Image failed to load:', heroImage);\n            console.error('Using fallback image');\n            setImageError(true);\n            // Set fallback image\n            e.target.src = '/images/placeholder/hero-image.jpg';\n          }\n        }}\n        onLoad={() => {\n          if (!imageError) {\n            console.log('Image loaded successfully:', heroImage);\n          }\n        }}\n      />\n\n      {/* Content on top of background */}\n      <div className=\"relative z-10 max-w-7xl mx-auto px-6 text-center\">\n        {/* COMPANY NAME */}\n        <h1 className=\"text-4xl md:text-6xl font-bold font-dinbek text-white mb-6 drop-shadow-lg\">\n          {heroContent?.title || 'Reshow Investments (Pvt) Ltd'}\n        </h1>\n\n        {/* TAGLINE */}\n        <p className=\"text-2xl md:text-3xl font-dosis text-white mb-8 drop-shadow-lg\">\n          {heroContent?.subtitle || 'Name it we brand it.'}\n        </p>\n\n        {/* TYPEWRITER TEXT */}\n        <p className=\"text-lg md:text-2xl font-dosis text-white max-w-4xl mx-auto mb-10 min-h-[4rem] drop-shadow-lg\">\n          {heroContent?.description || displayText}\n          {!heroContent?.description && index < text.length && (\n            <span className=\"animate-pulse text-reshow-red\">|</span>\n          )}\n        </p>\n\n        {/* CTA BUTTONS */}\n        <div className=\"flex flex-col sm:flex-row gap-4 justify-center\">\n          <Link\n            to=\"/services\"\n            className=\"bg-reshow-red text-white px-8 py-3 rounded-lg font-dosis font-semibold hover:bg-reshow-dark-red transition-colors shadow-lg\"\n          >\n            {heroContent?.buttonText || 'Request Quote'}\n          </Link>\n          <Link\n            to=\"/contact\"\n            className=\"bg-white border-2 border-white text-reshow-red px-8 py-3 rounded-lg font-dosis font-semibold hover:bg-reshow-red hover:text-white hover:border-reshow-red transition-colors shadow-lg\"\n          >\n            Contact Us\n          </Link>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default HeroWelcome;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}